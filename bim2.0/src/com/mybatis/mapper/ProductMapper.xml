<?xml version="1.0" encoding="UTF-8" ?>  
<!DOCTYPE mapper  
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mybatis.ProductMapper">
  <select id="getProduct" parameterType="map" resultType="com.model.Product">
         SELECT product.id,product.name,familyType,length, width,height,publishDate,edition,discription,link,installInstruction,
				product.certification,document,video,code,mainMaterial,secMaterial,design,production,weight,similarProduct,
                attachment,sccClass,IFCType,manufacturerID,thumbDir,downloadDir,buildingType,function,manufacturer.name as manufacturer
        FROM product join manufacturer on manufacturer.id = product.manufacturerID
        <if test="id != null and id != ''">  
    	    WHERE product.id = #{id}
        </if>
   </select>
   
   <select id="getAllProducts" resultType="com.model.Product">
    	 SELECT * FROM PRODUCT LIMIT ${startRow},${pageSize} 
   </select>
   
   <select id="getProductsByName" parameterType="map" resultType="com.model.Product">
        SELECT * 
        FROM PRODUCT
       
        <if test="name != null and name != '' and name != '搜索'">  
    	    WHERE name = #{name}
        </if>
   </select>
   
   <select id="getProductsBySearch" parameterType="map" resultType="com.model.Product">
        SELECT product.id,product.name,familyType,length, width,height,publishDate,edition,discription,link,installInstruction,
				product.certification,document,video,code,mainMaterial,secMaterial,design,production,weight,similarProduct,
                attachment,sccClass,IFCType,manufacturerID,thumbDir,downloadDir,buildingType,function,manufacturer.name as manufacturer
        FROM product join manufacturer on manufacturer.id = product.manufacturerID
       	WHERE 1=1
        <if test="name != null and name != '' and name != '搜索'">  
    	    and product.name like '%${name}%'
        </if>
        <if test="manufacturer != null and manufacturer != '' ">
            and manufacturer.name = #{manufacturer}
        </if>
        <if test="familyType != null and familyType != '' ">
            and familyType = #{familyType}
        </if>
        <if test="mainMaterial != null and mainMaterial != '' ">
            and mainMaterial = #{mainMaterial}
        </if>
        <if test="buildingType != null and buildingType != ''">
            and buildingType = #{buildingType}
        </if>
        <if test="function != null and function != ''">
            and function = #{function}
        </if>
   </select>
   
   <select id="getProducts" resultType="com.model.Product">
        SELECT * 
        FROM PRODUCT      
   </select>
   
     <select id="getManufacturer" parameterType="map" resultType="com.model.Manufacturer">
        SELECT * 
        FROM manufacturer
        where id = #{id}   
   </select>
   
</mapper>
